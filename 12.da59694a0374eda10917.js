(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{oSDr:function(t,e,n){"use strict";n.r(e),n.d(e,"SubscriptionModule",(function(){return A}));var c=n("ofXK"),i=n("tyNb"),b=n("SxV6"),o=n("3Pt+"),a=n("0IaG"),r=n("fXoL"),s=n("9nlD"),l=n("VuJc"),u=n("kmnG"),p=n("qFsG"),m=n("1jcm");let f=(()=>{class t{constructor(t,e,n,c,i){this.dialogRef=t,this.dialogData=e,this.notificationService=n,this.paymentsService=c,this.fb=i}ngOnInit(){this.payment=this.dialogData.payment,this.initForm()}closePopup(){this.dialogRef.close()}populateForm(){this.form.invalid||this.paymentsService.createSubscription(this.form.value).pipe(Object(b.a)()).subscribe(()=>{this.notificationService.success(),this.dialogRef.close()})}initForm(){this.form=this.fb.group({name:[null,o.v.required],days:[null,o.v.required],price:[null,o.v.required],currency_code:[null,o.v.required],is_active:[!1]})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(a.d),r.Lb(a.a),r.Lb(s.a),r.Lb(l.a),r.Lb(o.d))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-subscription-form"]],decls:26,vars:1,consts:[[1,"text-center"],[3,"formGroup"],["appearance","fill",1,"example-full-width"],["matInput","","type","text","formControlName","name"],["matInput","","type","text","formControlName","days"],["matInput","","type","text","formControlName","price"],["matInput","","type","text","formControlName","currency_code"],["formControlName","is_active"],[1,"popup-actions","mt-3"],["type","button",1,"secondary",3,"click"],["type","submit",1,"primary",3,"click"]],template:function(t,e){1&t&&(r.Qb(0,"h3",0),r.Ac(1,"Add payment"),r.Pb(),r.Qb(2,"form",1),r.Qb(3,"mat-form-field",2),r.Qb(4,"mat-label"),r.Ac(5,"Name"),r.Pb(),r.Mb(6,"input",3),r.Pb(),r.Qb(7,"mat-form-field",2),r.Qb(8,"mat-label"),r.Ac(9,"Days"),r.Pb(),r.Mb(10,"input",4),r.Pb(),r.Qb(11,"mat-form-field",2),r.Qb(12,"mat-label"),r.Ac(13,"Price"),r.Pb(),r.Mb(14,"input",5),r.Pb(),r.Qb(15,"mat-form-field",2),r.Qb(16,"mat-label"),r.Ac(17,"Currency"),r.Pb(),r.Mb(18,"input",6),r.Pb(),r.Qb(19,"mat-slide-toggle",7),r.Ac(20,"Active"),r.Pb(),r.Qb(21,"div",8),r.Qb(22,"button",9),r.Xb("click",(function(){return e.closePopup()})),r.Ac(23,"Cancel"),r.Pb(),r.Qb(24,"button",10),r.Xb("click",(function(){return e.populateForm()})),r.Ac(25," Create "),r.Pb(),r.Pb(),r.Pb()),2&t&&(r.zb(2),r.hc("formGroup",e.form))},directives:[o.x,o.p,o.h,u.c,u.f,p.a,o.b,o.o,o.g,m.a],encapsulation:2}),t})();var d=n("aF9I");function h(t,e){1&t&&(r.Qb(0,"p",8),r.Ac(1,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"),r.Pb())}function P(t,e){if(1&t){const t=r.Rb();r.Qb(0,"tr"),r.Qb(1,"td"),r.Ac(2),r.Pb(),r.Qb(3,"td"),r.Ac(4),r.Pb(),r.Qb(5,"td"),r.Ac(6),r.Pb(),r.Qb(7,"td"),r.Ac(8),r.Pb(),r.Qb(9,"td"),r.Ac(10),r.Pb(),r.Qb(11,"td",10),r.Qb(12,"mat-slide-toggle",11),r.Xb("change",(function(n){r.pc(t);const c=e.$implicit;return r.bc(2).changePaymentStatus(c.id,n.checked)})),r.Pb(),r.Pb(),r.Pb()}if(2&t){const t=e.$implicit;r.zb(2),r.Bc(null==t?null:t.name),r.zb(2),r.Bc(null!=t&&t.is_active?"Active":"Inactive"),r.zb(2),r.Bc(null==t?null:t.price),r.zb(2),r.Bc(null==t?null:t.days),r.zb(2),r.Bc(null==t?null:t.currency_code),r.zb(2),r.hc("checked",t.is_active)}}function y(t,e){if(1&t&&(r.Qb(0,"table"),r.Qb(1,"thead"),r.Qb(2,"tr"),r.Qb(3,"th"),r.Ac(4,"Name"),r.Pb(),r.Qb(5,"th"),r.Ac(6,"Status"),r.Pb(),r.Qb(7,"th"),r.Ac(8,"Price"),r.Pb(),r.Qb(9,"th"),r.Ac(10,"Days"),r.Pb(),r.Qb(11,"th"),r.Ac(12,"Currency"),r.Pb(),r.Qb(13,"th"),r.Ac(14,"Active"),r.Pb(),r.Pb(),r.Pb(),r.Qb(15,"tbody"),r.yc(16,P,13,6,"tr",9),r.Pb(),r.Pb()),2&t){const t=r.bc();r.zb(16),r.hc("ngForOf",t.payments)}}const g=[{path:"",component:(()=>{class t{constructor(t,e,n){this.dialog=t,this.subscriptionService=e,this.notificationService=n}ngOnInit(){this.getPayments()}changePaymentStatus(t,e){this.subscriptionService.updateSubscription(t,{is_active:e}).pipe(Object(b.a)()).subscribe(()=>{this.notificationService.success()})}openPaymentForm(t=null){this.dialog.open(f,{width:"30rem",data:{payment:t}}).afterClosed().pipe(Object(b.a)()).subscribe(()=>{this.getPayments()})}getPayments(){this.subscriptionService.getSubscriptions().pipe(Object(b.a)()).subscribe(t=>this.payments=t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(a.b),r.Lb(l.a),r.Lb(s.a))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-payments"]],decls:11,vars:2,consts:[[1,"minus-header-footer-height"],[1,"container","py-50"],[1,"d-flex","justify-content-between","mb-4"],[1,"sub-title"],[1,"secondary",3,"click"],[1,"overflow-auto"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-right"],[3,"checked","change"]],template:function(t,e){1&t&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"h2",3),r.Ac(4,"Subscriptions"),r.Pb(),r.Qb(5,"button",4),r.Xb("click",(function(){return e.openPaymentForm()})),r.Ac(6,"Add subscription"),r.Pb(),r.Pb(),r.Qb(7,"div",5),r.yc(8,h,2,0,"p",6),r.yc(9,y,17,1,"table",7),r.Pb(),r.Pb(),r.Pb(),r.Mb(10,"app-footer")),2&t&&(r.zb(8),r.hc("ngIf",!(null!=e.payments&&e.payments.length)),r.zb(1),r.hc("ngIf",null==e.payments?null:e.payments.length))},directives:[c.l,d.a,c.k,m.a],styles:["table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-of-type, table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-of-type{text-align:right;width:130px}"]}),t})()}];let Q=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},imports:[[i.g.forChild(g)],i.g]}),t})();var v=n("PCNd");let A=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},imports:[[c.c,Q,v.a]]}),t})()}}]);