(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"dV/L":function(i,t,n){"use strict";n.r(t),n.d(t,"SignsModule",(function(){return C}));var e=n("ofXK"),s=n("tyNb"),a=n("SxV6"),o=n("lJxs"),c=n("quSY"),r=n("3Pt+"),g=n("0IaG"),b=n("LvDl"),l=n("fXoL"),p=n("9nlD"),h=n("asTB"),d=n("kmnG"),u=n("qFsG"),m=n("QwIL");function f(i,t){if(1&i){const i=l.Rb();l.Qb(0,"app-image-uploader",13),l.Xb("changeImageSource",(function(t){l.pc(i);const n=l.bc();return n.imgSource=t,n.showRemoveButton=!0}))("removeImage",(function(){return l.pc(i),l.bc().removeImage()})),l.Pb()}if(2&i){const i=l.bc();l.hc("id",i.sign.id)("endpoint","sign")("imgSource",i.imgSource)("isNew",i.isNew)("showRemoveButton",i.showRemoveButton)}}let v=(()=>{class i{constructor(i,t,n,e,s){this.dialogRef=i,this.dialogData=t,this.formBuilder=n,this.notificationService=e,this.signsService=s,this.imgSource="assets/images/empty_image.png"}ngOnInit(){var i,t,n;this.sign=null===(i=this.dialogData)||void 0===i?void 0:i.sign,this.isNew=!this.sign,Object(b.isEmpty)(null===(n=null===(t=this.sign)||void 0===t?void 0:t.image)||void 0===n?void 0:n.data)||(this.showRemoveButton=!0,this.imgSource=this.sign.image.data.url),this.initForm()}closePopup(){this.dialogRef.close()}fetchForm(){this.form.invalid?this.form.markAsDirty():this.isNew?this.signsService.createSign(this.form.value).pipe(Object(a.a)()).subscribe(i=>{this.notificationService.success(),this.dialogRef.close(i.data)}):this.signsService.updateSign(this.sign.id,this.form.value).pipe(Object(a.a)()).subscribe(()=>{this.notificationService.success(),this.dialogRef.close()})}removeImage(){var i,t;Object(b.isEmpty)(null===(t=null===(i=this.sign)||void 0===i?void 0:i.image)||void 0===t?void 0:t.data)||this.signsService.removeImage(this.sign.id,this.sign.image.data.id).pipe(Object(a.a)()).subscribe(()=>{this.imgSource="assets/images/empty_image.png",this.showRemoveButton=!1})}initForm(){let i="EMPTY",t="";this.isNew||(i=this.sign.translations.data.find(i=>"en"===i.locale).description,t=this.sign.translations.data.find(i=>"ru"===i.locale).description),this.form=this.formBuilder.group({en:this.formBuilder.group({description:[i,r.v.required]}),ru:this.formBuilder.group({description:[t,r.v.required]})})}}return i.\u0275fac=function(t){return new(t||i)(l.Lb(g.d),l.Lb(g.a),l.Lb(r.d),l.Lb(p.a),l.Lb(h.a))},i.\u0275cmp=l.Fb({type:i,selectors:[["app-signs-form"]],decls:24,vars:4,consts:[[1,"text-center"],["enctype","multipart/form-data",3,"formGroup"],[1,"row"],[1,"col-6"],[3,"id","endpoint","imgSource","isNew","showRemoveButton","changeImageSource","removeImage",4,"ngIf"],["formGroupName","en"],[1,"col-md-6"],["appearance","fill",1,"example-full-width"],["rows","5","matInput","","formControlName","description"],["formGroupName","ru"],[1,"popup-actions","mt-3"],["type","button",1,"secondary",3,"click"],["type","submit",1,"primary",3,"click"],[3,"id","endpoint","imgSource","isNew","showRemoveButton","changeImageSource","removeImage"]],template:function(i,t){1&i&&(l.Qb(0,"h3",0),l.Ac(1),l.Pb(),l.Qb(2,"form",1),l.Qb(3,"div",2),l.Qb(4,"div",3),l.yc(5,f,1,5,"app-image-uploader",4),l.Pb(),l.Pb(),l.Qb(6,"div",2),l.Ob(7,5),l.Qb(8,"div",6),l.Qb(9,"mat-form-field",7),l.Qb(10,"mat-label"),l.Ac(11,"EN Description"),l.Pb(),l.Mb(12,"textarea",8),l.Pb(),l.Pb(),l.Nb(),l.Ob(13,9),l.Qb(14,"div",6),l.Qb(15,"mat-form-field",7),l.Qb(16,"mat-label"),l.Ac(17,"RU Description"),l.Pb(),l.Mb(18,"textarea",8),l.Pb(),l.Pb(),l.Nb(),l.Pb(),l.Qb(19,"div",10),l.Qb(20,"button",11),l.Xb("click",(function(){return t.closePopup()})),l.Ac(21," Cancel "),l.Pb(),l.Qb(22,"button",12),l.Xb("click",(function(){return t.fetchForm()})),l.Ac(23),l.Pb(),l.Pb(),l.Pb()),2&i&&(l.zb(1),l.Bc(t.isNew?"Add sign":"Edit sign "+(null==t.sign?null:t.sign.code)),l.zb(1),l.hc("formGroup",t.form),l.zb(3),l.hc("ngIf",!t.isNew),l.zb(18),l.Cc(" ",t.isNew?"Create":"Update"," "))},directives:[r.x,r.p,r.h,e.l,r.i,d.c,d.f,u.a,r.b,r.o,r.g,m.a],encapsulation:2}),i})();var P=n("QdkN"),S=n("M9IT");function Q(i,t){1&i&&(l.Qb(0,"p",4),l.Ac(1,"No data"),l.Pb())}function w(i,t){if(1&i){const i=l.Rb();l.Qb(0,"tr"),l.Qb(1,"td"),l.Ac(2),l.Pb(),l.Qb(3,"td"),l.Mb(4,"img",7),l.Pb(),l.Qb(5,"td"),l.Ac(6),l.Pb(),l.Qb(7,"td"),l.Ac(8),l.Pb(),l.Qb(9,"td",5),l.Qb(10,"i",8),l.Xb("click",(function(){l.pc(i);const n=t.$implicit;return l.bc(2).editSign(n)})),l.Pb(),l.Qb(11,"i",9),l.Xb("click",(function(){l.pc(i);const n=t.$implicit;return l.bc(2).removeSign.emit(null==n?null:n.id)})),l.Pb(),l.Pb(),l.Pb()}if(2&i){const i=t.$implicit;l.zb(2),l.Bc(null==i?null:i.code),l.zb(2),l.hc("src",i.image.data.url,l.rc),l.zb(2),l.Bc(i.translations.data[0].description),l.zb(2),l.Bc(i.translations.data[1].description)}}function I(i,t){if(1&i&&(l.Qb(0,"table"),l.Qb(1,"thead"),l.Qb(2,"tr"),l.Qb(3,"th"),l.Ac(4,"No"),l.Pb(),l.Qb(5,"th"),l.Ac(6,"Image"),l.Pb(),l.Qb(7,"th"),l.Qb(8,"div"),l.Ac(9," EN Description "),l.Pb(),l.Pb(),l.Qb(10,"th"),l.Qb(11,"div"),l.Ac(12," RU Description "),l.Pb(),l.Pb(),l.Qb(13,"th",5),l.Ac(14,"Actions"),l.Pb(),l.Pb(),l.Pb(),l.Qb(15,"tbody"),l.yc(16,w,12,4,"tr",6),l.Pb(),l.Pb()),2&i){const i=l.bc();l.zb(16),l.hc("ngForOf",i.signs)}}const y=function(){return[5,10,25,100]};function O(i,t){if(1&i){const i=l.Rb();l.Qb(0,"mat-paginator",10),l.Xb("page",(function(t){return l.pc(i),l.bc().changePage(t)})),l.Pb()}if(2&i){const i=l.bc();l.hc("length",null==i.pagination?null:i.pagination.length)("pageSize",null==i.pagination?null:i.pagination.pageSize)("pageSizeOptions",l.ic(3,y))}}let x=(()=>{class i{constructor(i){this.dialog=i,this.changePagination=new l.n,this.removeSign=new l.n,this.changedPagination={page:1,perPage:15}}ngOnInit(){}editSign(i){this.dialog.open(v,{width:"60rem",data:{sign:i}}).afterClosed().subscribe(i=>{this.changePagination.emit(this.changedPagination),i&&this.editSign(i)})}changePage(i){this.changedPagination.page=i.pageIndex+1,this.changedPagination.perPage=i.pageSize,this.changePagination.emit(this.changedPagination)}}return i.\u0275fac=function(t){return new(t||i)(l.Lb(g.b))},i.\u0275cmp=l.Fb({type:i,selectors:[["app-signs-list"]],inputs:{signs:"signs",pagination:"pagination"},outputs:{changePagination:"changePagination",removeSign:"removeSign"},decls:4,vars:3,consts:[[1,"overflow-auto"],["class","text-center",4,"ngIf"],[4,"ngIf"],["aria-label","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"text-center"],[1,"text-right"],[4,"ngFor","ngForOf"],["alt","",1,"sign-img",3,"src"],[1,"bx","bxs-pencil",3,"click"],[1,"bx","bxs-trash",3,"click"],["aria-label","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443",3,"length","pageSize","pageSizeOptions","page"]],template:function(i,t){1&i&&(l.Qb(0,"div",0),l.yc(1,Q,2,0,"p",1),l.yc(2,I,17,1,"table",2),l.yc(3,O,1,4,"mat-paginator",3),l.Pb()),2&i&&(l.zb(1),l.hc("ngIf",!(null!=t.signs&&t.signs.length)),l.zb(1),l.hc("ngIf",t.signs.length),l.zb(1),l.hc("ngIf",t.signs.length))},directives:[e.l,e.k,S.a],styles:["table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:60px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:150px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:100px}table[_ngcontent-%COMP%]   .sign-img[_ngcontent-%COMP%]{max-height:50px;max-width:100px}"]}),i})();var z=n("aF9I");const N=[{path:"",component:(()=>{class i{constructor(i,t,n){this.dialog=i,this.signsService=t,this.notificationService=n,this.signs=[],this.options={include:["translations","image"],page:1,perPage:15},this.subscription=new c.a}ngOnInit(){this.getSigns()}addSign(){this.dialog.open(v,{width:"50rem"})}removeSign(i){this.dialog.open(P.a,{width:"30rem"}).afterClosed().pipe(Object(a.a)()).subscribe(t=>{t&&this.signsService.removeSign(i).pipe(Object(a.a)()).subscribe(()=>{this.getSigns(),this.notificationService.success()})})}getSigns(i=null){i&&(this.options=Object.assign(Object.assign({},this.options),i)),this.subscription.add(this.signsService.getSigns(this.options).pipe(Object(o.a)(i=>(this.pagination={length:i.meta.pagination.total,pageSize:i.meta.pagination.per_page},i.data))).subscribe(i=>{this.signs=i}))}}return i.\u0275fac=function(t){return new(t||i)(l.Lb(g.b),l.Lb(h.a),l.Lb(p.a))},i.\u0275cmp=l.Fb({type:i,selectors:[["app-signs"]],decls:9,vars:2,consts:[[1,"minus-header-footer-height"],[1,"container","py-50"],[1,"d-flex","justify-content-between","mb-4"],[1,"sub-title"],[1,"secondary",3,"click"],[3,"signs","pagination","removeSign","changePagination"]],template:function(i,t){1&i&&(l.Qb(0,"div",0),l.Qb(1,"div",1),l.Qb(2,"div",2),l.Qb(3,"h2",3),l.Ac(4,"Sign list"),l.Pb(),l.Qb(5,"button",4),l.Xb("click",(function(){return t.addSign()})),l.Ac(6,"Add sign"),l.Pb(),l.Pb(),l.Qb(7,"app-signs-list",5),l.Xb("removeSign",(function(i){return t.removeSign(i)}))("changePagination",(function(i){return t.getSigns(i)})),l.Pb(),l.Pb(),l.Pb(),l.Mb(8,"app-footer")),2&i&&(l.zb(7),l.hc("signs",t.signs)("pagination",t.pagination))},directives:[x,z.a],encapsulation:2}),i})()}];let A=(()=>{class i{}return i.\u0275mod=l.Jb({type:i}),i.\u0275inj=l.Ib({factory:function(t){return new(t||i)},imports:[[s.g.forChild(N)],s.g]}),i})();var k=n("PCNd"),B=n("evvh");let C=(()=>{class i{}return i.\u0275mod=l.Jb({type:i}),i.\u0275inj=l.Ib({factory:function(t){return new(t||i)},imports:[[e.c,A,k.a,B.a]]}),i})()}}]);